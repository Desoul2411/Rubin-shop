$(document).ready((function(){function e(){$(".filter__colors").height()>=266&&$("#colors").addClass("scrolled")}function t(){$(".filter__sizes").height()>=266&&$("#sizes").addClass("scrolled")}$(".header__mobile-menu-open-button").on("click",(function(){$(".mobile-menu-overlay").addClass("opened"),$("body").css("overflow","hidden"),setTimeout(()=>{$(".mobile-menu").addClass("opened")},0)})),$(".mobile-menu-overlay").on("click",(function(e){var t=$(".mobile-menu");e.target!=t[0]&&0===t.has(e.target).length&&($(".mobile-menu").removeClass("opened"),setTimeout(()=>{$(this).removeClass("opened"),$("body").css("overflow","auto")},300))})),$(".product-menu__menu-arrow").on("click",(function(){$(this).next().addClass("opened"),$(".wrapper").css("overflow","hidden")})),$(".submenu__close-button").on("click",(function(){$(this).parent().removeClass("opened"),$(".wrapper").css("overflow","auto")})),$(".user-menu__link_search").on("click",(function(e){e.preventDefault(),$(".search_mobile").slideToggle()})),e(),t();new SimpleBar(document.getElementById("colors"),{scrollbarMinSize:100,autoHide:!1}),new SimpleBar(document.getElementById("sizes"),{scrollbarMinSize:100,autoHide:!1});$(".filter__headline").on("click",(function(){$(this).next().slideToggle(300),$(this).find(".filter__headline-arrow").toggleClass("opened"),e(),t()})),$(window).width()<=768&&$(".catalogue-content__filter-mobile").on("click",(function(){$(".filter").slideToggle(400)}));function a(e,t){$(`\n            <div class="filter-markers__item" data-filter-value=${e}>\n                <span class="filter-markers__item-text">${t}</span>\n                <svg class="filter-markers__item-icon" width="10" height="10" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg">\n                    <path d="M1 1L4.75 4.75M8.5 8.5L4.75 4.75M4.75 4.75L8.5 1L1 8.5" stroke="#333333" stroke-width="2"/>\n                </svg>                                        \n            </div>\n        `).appendTo(".filter-markers")}function n(e){$("body").css({overflow:"hidden","padding-right":"17px"}),$(e).fadeIn(200),$(e).css("display","flex")}function i(e=300,t=300){setTimeout((function(){$("body").css({overflow:"auto","padding-right":"0"})}),t),$(".overlay").fadeOut(e)}$(".filter__item").on("click",(function(e){$(this).toggleClass("selected");var t=$(this).text(),n=$(this).attr("data-filter-value");if($(this).hasClass("selected")){if(0===$(".filter-markers__item-text").length)a(n,t);else{var i=[];$(".filter-markers__item-text").each((function(e,t){i.push($(t).text())})),i.includes(t)||a(n,t)}$(".filter-markers__item-icon").on("click",(function(){$(this).parent().remove();let e=$(this).prev().text();$(".filter__item").each((function(t,a){$(a).text()===e&&$(a).removeClass("selected")}))}))}else 0!==$(".filter-markers__item-text").length&&$(".filter-markers__item-text").each((function(e,a){$(a).text()===t&&$(a).parent().remove()}))})),$(".card__fast-browse").on("click",(function(e){e.preventDefault(),n(".overlay_main-card")})),$(".criteria__link").on("click",(function(){n(".overlay_sizes-table")})),$(".sizes-table-modal__close-button").on("click",(function(){$(".overlay_sizes-table").fadeOut(200)})),$(".overlay_sizes-table").on("click",(function(e){$(e.target).hasClass("overlay_sizes-table")&&$(".overlay_sizes-table").fadeOut(200)})),$(".criteria__btn-full").on("click",(function(){$("body").css({overflow:"auto","padding-right":"0"}),$(".overlay").fadeOut(0),n(".overlay_added-to-cart")})),$(".footer__sign-email-form").on("submit",(function(e){e.preventDefault(),$.ajax({type:"POST",url:"mail.php",data:$(this).serialize(),success:function(){$(".modal-confirm__title").text("Cпасибо за подписку!"),$(".modal-confirm__message").text("На указанный E-mail отправлено письмо с промокодом.!"),n(".overlay_confirm-email-subscription"),$(this).find("input").val(""),$(this).trigger("reset")},error:function(){$(".modal-confirm__title").text("Что-то пошло не так..."),$(".modal-confirm__message").text("Попробуйте ещё раз"),n(".overlay_confirm-email-subscription"),$(this).find("input").val(""),$(this).trigger("reset")}})})),$(".card__into-basket").on("click",(function(e){e.preventDefault(),n(".overlay_added-to-cart")})),$(".modal-added-to-cart__continue-shopping-button").on("click",(function(){i()})),$(".modal-confirm__ok-button").on("click",i),$(".modal-close-button").on("click",i),$(".overlay").on("click",(function(e){($(e.target).hasClass("overlay")||$(e.target).hasClass("main-card"))&&i()})),document.querySelector(".up-button").addEventListener("click",()=>{var e;e="#top",$("html,body").animate({scrollTop:$(e).offset().top-20},500)}),window.onscroll=function(){var e=3.3*$(".card").height(),t=window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop;t>=e&&($(".up-button").removeClass("hidden"),$(".up-button").addClass("shown")),t<e&&($(".up-button").remove("shown"),$(".up-button").addClass("hidden"))};var s=$(".pagination__pages-wrapper"),o=$(".pagination__page-numbers"),l=$(".pagination__prevButton"),c=$(".pagination__nextButton"),r=$(".pagination_catalogue-top .pagination__page-number"),d=$(".pagination_catalogue-bottom .pagination__page-number"),u=0,v=5,m=r.length,f=v-1,h=0,_=0;switch(m){case 1:$(".pagination").css("display","none");break;case 2:v=2;break;case 3:v=3;break;case 4:v=4}var g=0;function p(e,t){e.hasClass("active")&&(0===t?$(".pagination__prevButton").addClass("disabled"):$(".pagination__prevButton").removeClass("disabled"),t===m-1?$(".pagination__nextButton").addClass("disabled"):$(".pagination__nextButton").removeClass("disabled"))}!function(){s.width(0),g=0;for(let e=h;e<=f;e++)g+=$(r[e]).width(),s.width(g)}(),$(r).each((function(e,t){$(r).hasClass("active")&&0===e&&$(".pagination__prevButton").addClass("disabled")})),l.on("click",(function(){u>0&&m<=5?(u--,$(r).removeClass("active"),$(r[u]).addClass("active"),$(d).removeClass("active"),$(d[u]).addClass("active")):u>0&&f>4?($(r).each((function(e,t){if($(t).hasClass("active")&&e>m-3)return $(t).prev().addClass("active"),$(t).removeClass("active"),!1;$(t).hasClass("active")&&e<=m-3&&(0===h?h=0:h--,u=h+1,0===f||f--,u--,f>=m-1&&(u=f),o.css("transform","translateX(-"+u*$(r[h]).width()+"px)"),$(r).each((function(e,t){if($(t).hasClass("active"))return $(t).prev().addClass("active"),$(t).removeClass("active"),!1})))})),$(d).each((function(e,t){if($(t).hasClass("active")&&e>m-3)return $(t).prev().addClass("active"),$(t).removeClass("active"),!1;$(t).hasClass("active")&&e<=m-3&&(o.css("transform","translateX(-"+u*$(d[h]).width()+"px)"),$(d).each((function(e,t){if($(t).hasClass("active"))return $(t).prev().addClass("active"),$(t).removeClass("active"),!1})))}))):f<=4&&($(r).each((function(e,t){return(!$(t).hasClass("active")||0!==e)&&($(t).hasClass("active")?($(t).prev().addClass("active"),$(t).removeClass("active"),!1):void 0)})),$(d).each((function(e,t){return(!$(t).hasClass("active")||0!==e)&&($(t).hasClass("active")?($(t).prev().addClass("active"),$(t).removeClass("active"),!1):void 0)})))})),c.on("click",(function(){m<=5&&u===m-1?u=u:5===m&&u<4||4===m&&u<3||3===m&&u<2||2===m&&u<1?(u++,$(r).removeClass("active"),$(r[u]).addClass("active"),$(d).removeClass("active"),$(d[u]).addClass("active")):f<=4?($(r).each((function(e,t){if(2===e&&(u++,h++,f++,_=s.width()/v,o.css("transform","translateX(-"+u*_+"px)")),$(t).hasClass("active"))return $(t).next().addClass("active"),$(t).removeClass("active"),!1})),$(d).each((function(e,t){if(2===e&&(_=s.width()/v,o.css("transform","translateX(-"+u*_+"px)")),$(t).hasClass("active"))return $(t).next().addClass("active"),$(t).removeClass("active"),!1}))):u<m-v||f>4&&f<m-1?(u++,f===m-1||f++,h++,_=s.width()/v,o.css("transform","translateX(-"+u*_+"px)"),$(r).each((function(e,t){if($(t).hasClass("active"))return $(t).next().addClass("active"),$(t).removeClass("active"),!1})),$(d).each((function(e,t){if($(t).hasClass("active"))return $(t).next().addClass("active"),$(t).removeClass("active"),!1}))):f===m-1&&($(r).each((function(e,t){return e!==m-1&&($(t).hasClass("active")?($(t).next().addClass("active"),$(t).removeClass("active"),!1):void 0)})),$(d).each((function(e,t){return e!==m-1&&($(t).hasClass("active")?($(t).next().addClass("active"),$(t).removeClass("active"),!1):void 0)})))})),$(r).each((function(e,t){$(t).on("click",(function(t){$(r).removeClass("active"),$(t.target).addClass("active"),m>5&&m-e>=3?(u=e<=2?0:e-2,_=s.width()/v,o.css("transform","translateX(-"+u*_+"px)"),h=e<=2?0:e-2,f=e+2):m<=5&&(u=e),p($(t.target),e)}))})),$(d).each((function(e,t){$(t).on("click",(function(t){$(d).removeClass("active"),$(t.target).addClass("active"),m>5&&m-e>=3?(u=e<=2?0:e-2,_=s.width()/v,o.css("transform","translateX(-"+u*_+"px)"),h=e<=2?0:e-2,f=e+2):m<=5&&(u=e),p($(t.target),e)}))})),$(".pagination_catalogue-top .pagination__page-number").each((function(e,t){$(t).on("click",(function(){$(t).hasClass("active")&&$(".pagination_catalogue-bottom .pagination__page-number").each((function(t,a){$(a).removeClass("active"),e===t&&$(a).addClass("active")}))}))})),$(".pagination_catalogue-bottom .pagination__page-number").each((function(e,t){$(t).on("click",(function(){$(t).hasClass("active")&&$(".pagination_catalogue-top .pagination__page-number").each((function(t,a){$(a).removeClass("active"),e===t&&$(a).addClass("active")}))}))})),$(".pagination__pages").on("click",(function(e){$(e.target).hasClass("active")&&console.log("AJAX for "+$(e.target).text()+" page")})),$(".pagination__prevButton").on("click",(function(){$(r).each((function(e,t){$(t).hasClass("active")&&(p($(t),e),console.log("AJAX for "+$(t).text()+" page"))}))})),$(".pagination__nextButton").on("click",(function(){$(r).each((function(e,t){$(t).hasClass("active")&&(p($(t),e),console.log("AJAX for "+$(t).text()+" page"))}))})),$(document).ready((function(){$(".gallery__nav-list").slick({arrows:!1,vertical:!0,slidesToShow:5,slidesToScroll:1,verticalSwiping:!0,infinite:!1,touchThreshold:10,responsive:[{breakpoint:576,settings:"unslick"}]})}));document.getElementById("carousel-gallery-modal").addEventListener("click",(function(e){const t=document.querySelectorAll(".gallery__nav-item.gallery__nav-item_modal"),a=document.querySelectorAll(".gallery__item.gallery__item_modal");for(let s=0;s<t.length;s++)n=t[s],i=a[s],n.contains(e.target)&&(a.forEach(e=>{e.classList.contains("visually-hidden")||e.classList.add("visually-hidden")}),i.classList.remove("visually-hidden"),t.forEach(e=>{e.classList.contains("gallery__nav-item_active")&&e.classList.remove("gallery__nav-item_active")}),n.classList.add("gallery__nav-item_active"));var n,i}));const C=document.getElementById("list-sizes-modal"),b=document.getElementById("chosen-size-modal");C.addEventListener("change",(function(e){const t=document.querySelectorAll('.main-card_modal input[name="very"]');console.log("страницы кнопки: "+t),console.log("страницы кликнули по: "+e.target);for(let n=0;n<t.length;n++)(a=t[n]).contains(e.target)&&(b.textContent=a.value);var a}));const w=document.getElementById("list-colors-modal"),y=document.getElementById("chosen-color-modal");w.addEventListener("change",(function(e){const t=document.querySelectorAll('.main-card_modal input[name="color"]');for(let n=0;n<t.length;n++)(a=t[n]).contains(e.target)&&(y.textContent=a.value);var a}));document.querySelector("body").addEventListener("click",(function(e){const t=document.querySelectorAll(".criteria__btn-empty");for(let n=0;n<t.length;n++)(a=t[n]).contains(e.target)&&!a.classList.contains("in-favorites")?(a.innerHTML='<svg width="15" height="13" viewBox="0 0 15 13" fill="none"\n                                     xmlns="http://www.w3.org/2000/svg">\n                                    <path d="M7.353 12.9618C7.39799 12.9884 7.44901 13.0002 7.5 13.0002C7.551 13.0002 7.60201 12.9884 7.647 12.9618C7.947 12.7934 15 8.79591 15 4.13661C15 1.85569 13.116 0.000244141 10.8 0.000244141C9.49799 0.000244141 8.29501 0.585238 7.5 1.58388C6.70499 0.585238 5.50201 0.000244141 4.2 0.000244141C1.88401 0.000244141 0 1.85569 0 4.13661C0 8.79591 7.053 12.7934 7.353 12.9618Z"\n                                          fill="#333333"/>\n                                </svg> в избранном',a.classList.add("in-favorites")):a.contains(e.target)&&a.classList.contains("in-favorites")&&(a.innerHTML='<svg width="15" height="13" viewBox="0 0 15 13" fill="none"\n                                     xmlns="http://www.w3.org/2000/svg">\n                                    <path d="M7.353 12.9618C7.39799 12.9884 7.44901 13.0002 7.5 13.0002C7.551 13.0002 7.60201 12.9884 7.647 12.9618C7.947 12.7934 15 8.79591 15 4.13661C15 1.85569 13.116 0.000244141 10.8 0.000244141C9.49799 0.000244141 8.29501 0.585238 7.5 1.58388C6.70499 0.585238 5.50201 0.000244141 4.2 0.000244141C1.88401 0.000244141 0 1.85569 0 4.13661C0 8.79591 7.053 12.7934 7.353 12.9618Z"\n                                          fill="#333333"/>\n                                </svg> добавить в избранное',a.classList.remove("in-favorites"));var a}))}));