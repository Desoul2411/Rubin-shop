$(document).ready((function(){var e,o,t,r,i,n,a,s,d;function p(){$('input[name="delivery"]').is(":checked")&&$(".order-info__select-deliver-method-warning").css("display","none"),$(".order-info__option-checkbox").each((function(e,o){$(o).prop("checked")?($(o).parent().css("display","none"),$(o).parent().next().css("display","block")):($(o).parent().css("display","block"),$(o).parent().next().css("display","none"))}))}function c(e){$("body").css("overflow","hidden"),$(e).fadeIn(200),$(e).css("display","flex"),$("body").css("padding-right","17px")}function l(){setTimeout((function(){$("body").css("overflow","auto"),$("body").css("padding-right","0px")}),300),$(".overlay").fadeOut(300)}$(".header__mobile-menu-open-button").on("click",(function(){$(".mobile-menu-overlay").addClass("opened"),$("body").css("overflow","hidden"),setTimeout(()=>{$(".mobile-menu").addClass("opened")},0)})),$(".mobile-menu-overlay").on("click",(function(e){var o=$(".mobile-menu");e.target!=o[0]&&0===o.has(e.target).length&&($(".mobile-menu").removeClass("opened"),setTimeout(()=>{$(this).removeClass("opened"),$("body").css("overflow","auto")},300))})),$(".product-menu__menu-arrow").on("click",(function(){$(this).next().addClass("opened"),$(".wrapper").css("overflow","hidden")})),$(".submenu__close-button").on("click",(function(){$(this).parent().removeClass("opened"),$(".wrapper").css("overflow","auto")})),$(".user-menu__link_search").on("click",(function(e){e.preventDefault(),$(".search_mobile").slideToggle()})),$(".cart-item__delete-button").on("click",(function(){$(this).parent().parent().parent().parent().remove(),""==$(".cart-main-content__cards").html().trim()&&($(".cart-main-content__cards").html('<p class="cart-main-content__empty-cart-message">Корзина пуста. Добавьте товар!</p>'),$(".order-info__make-order-button").css("background","grey"),$(".order-info__make-order-button").css("cursor","default"),$(".order-info__make-order-button").prop("disabled",!0),$(".order-info__products-price-sum").text(0),$(".order-info__discount-sum").text(0),$(".order-info__delivery-sum").text(0),$(".order-info__total-price-sum").text(0),$('input[name="delivery"]').prop("checked",!1),$('input[name="delivery"]').removeAttr("checked"),$('input[name="delivery"]').prop("disabled",!0),$(".order-info__option-label_main").css({display:"block","pointer-events":"none"}),$(".order-info__checked-icon").css({display:"none","pointer-events":"none"}),$(".order-info__promocode").css("pointer-events","none"),$(".order-info__options-block_select-shop").slideUp(300),$(".order-info__options-block_inputs-block").slideUp(300),$(".order-info__options-block_payment-way").slideUp(300))})),$(".cart-item__edit-button").on("click",(function(p){c(".overlay_edit-product"),e=$(this).parent().parent().parent().parent(),o=$(this).parent().parent().parent().find(".cart-item__option-value_color").text(),initColorAttr=$(this).parent().parent().parent().find(".cart-item__option-value_color").attr("data-color"),t=$(this).parent().parent().parent().find(".cart-item__option-value_size").text(),initSizeAttr=$(this).parent().parent().parent().find(".cart-item__option-value_color").attr("data-size"),initAmountValue=$(this).parent().parent().parent().find(".cart-item__option-value_amount").text(),initAmountAttr=$(this).parent().parent().parent().find(".cart-item__option-value_color").attr("data-amount"),$("#edited-color").val(o),$("#edited-size").val(t),$("#edited-amount").val(initAmountValue),$("#edited-color").on("change",(function(e){r=$(e.target).val()})),$("#edited-size").on("change",(function(e){i=$(e.target).val()})),$("#edited-amount").on("change",(function(e){(n=$(e.target).val())<1&&$(e.target).val(1)})),$(".edit-product-modal__confirm-button").on("click",(function(){$(e).find(".cart-item__option-value_color").text(r),$(e).find(".cart-item__option-value_color").attr("data-color",r),$(e).find(".cart-item__option-value_size").text(i),$(e).find(".cart-item__option-value_size").attr("data-size",i),$(e).find(".cart-item__option-value_amount").text(n),$(e).find(".cart-item__option-value_amount").attr("data-amount",n),a=(+$(e).find(".cart-item__price").text()).toFixed(2),s=+$(e).find(".cart-item__option-value_amount").text(),d=(a*s).toFixed(2),$(e).find(".cart-item__total-price").text(d),$(e).find(".cart-item__total-price").attr("data-total-item-price",d),l()}))})),$(".order-info__promocode").on("click",(function(){$(".order-info__enter-promocode").toggleClass("shown"),$(".order-info__enter-promocode").hasClass("shown")?$(".order-info__enter-promocode").prop("disabled",!1):$(".order-info__enter-promocode").prop("disabled",!0),$(".order-info__enter-promocode").slideToggle(300)})),$(".order-info__option-checkbox").on("change",(function(e){p(),$(e.target).prop("checked")&&"Самовывоз из магазина"===$(e.target).attr("value")&&($(".order-info__courier-delivery-sub-option").slideUp(300),$(".order-info__options-block").slideDown(300),$('input[name="shop_adress"]').prop("required",!0),$('input[name="shop_adress"]').prop("disabled",!1),$(".order-info__option_input_city").css("display","none"),$(".order-info__adress-block").css("display","none"),$("#street").prop("disabled",!0),$("#city").prop("disabled",!0),$("#house_number").prop("disabled",!0),$("#flat_number").prop("disabled",!0),$("#oplata-pri-poluchenii").prop("required",!0),$("#oplata-pri-poluchenii").prop("disabled",!1),$('input[name="payment"]').prop("checked",!1),$(".order-info__option_samovyvoz").css("display","flex"),$(".order-info__option_postal-delivery").css("display","none"),$(".order-info__option_courier-delivery").css("display","none"),$(".order-info__option_courier-delivery-cash").css("display","none"),p()),$(e.target).prop("checked")&&"Доставка почтой по РБ"===$(e.target).attr("value")&&($(".order-info__courier-delivery-sub-option").slideUp(300),$(".order-info__options-block").slideDown(300),$(".order-info__options-block_select-shop").css("display","none"),$('input[name="shop_adress"]').prop("required",!1),$('input[name="shop_adress"]').prop("disabled",!0),$(".order-info__option_input_city").css("display","flex"),$(".order-info__adress-block").css("display","flex"),$("#street").prop("disabled",!1),$("#city").prop("disabled",!1),$("#house_number").prop("disabled",!1),$("#flat_number").prop("disabled",!1),$("#street").prop("required",!0),$("#city").prop("required",!0),$("#house_number").prop("required",!0),$("#flat_number").prop("required",!0),$("#courier-pay-by-card").prop("required",!1),$("#courier-delivery").prop("required",!1),$("#oplata-pri-poluchenii").prop("required",!1),$("#oplata-pri-poluchenii").prop("disabled",!0),$('input[name="payment"]').prop("checked",!1),$(".order-info__option_courier-delivery").css("display","none"),$(".order-info__option_courier-delivery-cash").css("display","none"),$(".order-info__option_samovyvoz").css("display","none"),$(".order-info__option_postal-delivery").css("display","flex"),p()),$(e.target).prop("checked")&&"Курьерская доставка"===$(e.target).attr("value")&&($(".order-info__courier-delivery-sub-option").slideDown(300),$(".order-info__options-block").slideDown(300),$(".order-info__options-block_select-shop").css("display","none"),$('input[name="shop_adress"]').prop("required",!1),$('input[name="shop_adress"]').prop("disabled",!0),$(".order-info__option_input_city").css("display","flex"),$(".order-info__adress-block").css("display","flex"),$("#street").prop("disabled",!1),$("#city").prop("disabled",!1),$("#house_number").prop("disabled",!1),$("#flat_number").prop("disabled",!1),$('input[name="payment"]').prop("checked",!1),$(".order-info__option_courier-delivery").css("display","flex"),$(".order-info__option_courier-delivery-cash").css("display","flex"),$(".order-info__option_samovyvoz").css("display","none"),$(".order-info__option_postal-delivery").css("display","none"),p())})),$(".footer__sign-email-form").on("submit",(function(e){e.preventDefault(),$.ajax({type:"POST",url:"mail.php",data:$(this).serialize(),success:function(){$(".modal-confirm__title").text("Cпасибо за подписку!"),$(".modal-confirm__message").text("На указанный E-mail отправлено письмо с промокодом.!"),c(".overlay_confirm-email-subscription"),$(this).find("input").val(""),$(this).trigger("reset")},error:function(){$(".modal-confirm__title").text("Что-то пошло не так..."),$(".modal-confirm__message").text("Попробуйте ещё раз"),c(".overlay_confirm-email-subscription"),$(this).find("input").val(""),$(this).trigger("reset")}})})),$(".order-info__make-order-button").on("click",(function(){!1===$('input[name="delivery"]').is(":checked")&&$(".order-info__select-deliver-method-warning").css("display","block")})),$(".cart__content-form").on("submit",(function(e){e.preventDefault(),$.ajax({type:"POST",url:"mail.php",data:$(this).serialize(),success:function(){c(".overlay_thnx-for-order"),$(this).find("input").val(""),$(this).trigger("reset")},error:function(){$(".modal-confirm__title").text("Что-то пошло не так..."),$(".modal-confirm__message").text("Попробуйте ещё раз"),c(".overlay_confirm-email-subscription"),$(this).find("input").val(""),$(this).trigger("reset")}})})),$(".modal-confirm__ok-button").on("click",l),$(".modal-close-button").on("click",l),$(".overlay").on("click",(function(e){$(e.target).hasClass("overlay")&&l()})),jQuery(document).ready((function(){jQuery("#phone").mask("+375 (99) 999-99-99")}))}));